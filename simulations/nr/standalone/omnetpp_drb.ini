[General]
sim-time-limit=20s
**.routingRecorder.enabled = false

############### Statistics ##################
output-scalar-file = ${resultdir}/${configname}/${repetition}.sca
output-vector-file = ${resultdir}/${configname}/${repetition}.vec
seed-set = ${repetition}
**.vector-recording = true

################ Mobility parameters #####################
# *

**.mobility.constraintAreaMaxX = 1000m
**.mobility.constraintAreaMaxY = 1000m
**.mobility.constraintAreaMinX = 0m
**.mobility.constraintAreaMinY = 0m
**.mobility.constraintAreaMinZ = 0m
**.mobility.constraintAreaMaxZ = 0m
**.mobility.initFromDisplayString = false

############### Number of Resource Blocks ################
**.numBands = 50 # this value should be kept equal to the number of RBs

############### Transmission Power ##################
**.ueTxPower = 26dBm
**.eNodeBTxPower = 40dBm
**.targetBler = 0.01
**.blerShift = 5

############### IPv4 configurator config #################
*.configurator.config = xmldoc("./demo.xml")


#------------------------------------#
# Config Standalone
#
# Topology configuration for the exemplary scenario for NR Standalone deployment
#
[Config Standalone]
network = simu5g.simulations.nr.networks.SingleCell_Standalone_Drb
sim-time-limit=20s

############### e/gNodeB configuration #################
*.gnb.mobility.initialX = 450m
*.gnb.mobility.initialY = 300m
*.gnb.cellularNic.nrRxSdapEntity.qfiContextFile = "qfi_drb_mapping_config.txt"
*.gnb.cellularNic.numDrbs = 4

############## UE configuration ##################
*.numUe = 1

# connect the UE's NIC to the corresponding serving gNB (NR side only)
*.ue[0].macCellId = 0
*.ue[0].masterId = 0
*.ue[0].nrMacCellId = 1
*.ue[0].nrMasterId = 1

# UE position
*.ue[0].mobility.initialX = 450m
*.ue[0].mobility.initialY = 350m
#------------------------------------#
*.ue[0].**.NrTxSdapEntity.debug = true
*.ue[0].**.NrTxSdapEntity.verbose = true
*.**.NrTxSdapEntity.* = debug
*.ue[0].cellularNic.nrTxSdapEntity.qfiContextFile = "qfi_drb_mapping_config.txt"
*.ue[0].cellularNic.numDrbs = 4

#------------------------------------#
# Config VoIP-DL
#
# General configuration for Voice-over-IP DL traffic to the UE
#
[Config VoIP-DL]
extends=Standalone

# multiple UDP applications for each UE
*.ue[*].numApps = 4

# the amount of UDP applications on server should be equal to (numUEs)*(ue[*].numApps)
*.server.numApps = 4

#============= Application Setup =============
*.ue[*].app[*].typename = "VoipReceiver"
*.ue[0].app[0].localPort = 3000
*.ue[0].app[1].localPort = 3001
*.ue[0].app[2].localPort = 3002
*.ue[0].app[3].localPort = 3003

*.server.app[*].packetSize = 40B
*.server.app[*].destAddress = "ue[0]" # obtain the address of the client by reading its index in the array of udp Apps
*.server.app[0].localPort = 3088+ancestorIndex(0)
*.server.app[1].localPort = 3089+ancestorIndex(0)
*.server.app[2].localPort = 3090+ancestorIndex(0)
*.server.app[3].localPort = 3091+ancestorIndex(0)
*.server.app[*].typename = "VoipSender"
*.server.app[*].startTime = uniform(0s,0.02s)
#------------------------------------#



#------------------------------------#
# Config VoIP-UL
#
# General configuration for Voice-over-IP UL traffic from the UE
#
[Config VoIP-UL]
extends=Standalone

# multiple UDP applications for each UE
*.ue[*].numApps = 4

# the amount of UDP applications on server should be equal to (numUEs)*(ue[*].numApps)
*.server.numApps = 4

#============= Application Setup =============
*.server.app[*].typename = "VoipReceiver"
*.server.app[0].localPort = 3000+ancestorIndex(0)
*.server.app[1].localPort = 3001+ancestorIndex(0)
*.server.app[2].localPort = 3002+ancestorIndex(0)
*.server.app[3].localPort = 3003+ancestorIndex(0)

*.ue[*].app[*].packetSize = 40B
# obtain the address of the client by reading its index in the array of udp Apps
*.ue[*].app[*].destAddress = "server"
*.ue[*].app[0].localPort = 3088+ancestorIndex(0)
*.ue[*].app[1].localPort = 3089+ancestorIndex(0)
*.ue[*].app[2].localPort = 3090+ancestorIndex(0)
*.ue[*].app[3].localPort = 3091+ancestorIndex(0)

*.ue[*].app[0].qfi = 1
*.ue[*].app[1].qfi = 2
*.ue[*].app[2].qfi = 3
*.ue[*].app[3].qfi = 4

*.ue[*].app[*].typename = "VoipSender"
*.ue[*].app[*].startTime = uniform(0s,0.02s)
#------------------------------------#


